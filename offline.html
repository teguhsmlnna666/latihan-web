<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Offline - Teguh Portfolio</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#384959" />
  </head>
  <body>
    <nav>
      <div class="nav-left">
        <p>teguhsmlnna</p>
      </div>
      <div class="nav-right">
        <span style="color: #384959; padding: 2px 10px;">🔴 Offline Mode</span>
      </div>
    </nav>

    <div class="main-grid">
      <div class="main-left">
        <h1>🔌 Anda Sedang Offline</h1>
        <p>
          Maaf, website ini memerlukan koneksi internet untuk dapat diakses.
        </p>
        <p>
          <strong>Halaman yang tersedia saat offline:</strong>
        </p>
        <p>
          ❌ Home - Memerlukan koneksi internet<br>
          ❌ About - Memerlukan koneksi internet<br>
          ❌ Contact - Memerlukan koneksi internet<br>
          ✅ Offline Page - Halaman ini (sedang ditampilkan)
        </p>
        <p>
          Silakan periksa koneksi internet Anda dan coba lagi.
        </p>
        <button onclick="window.location.reload()" style="
          display: inline-block;
          margin-top: 20px;
          padding: 10px 22px;
          font-weight: bold;
          background: #384959;
          color: #fff;
          border: none;
          border-radius: 8px;
          cursor: pointer;
          box-shadow: 0 4px 6px rgba(0,0,0,0.18);
          transition: all 0.3s;
        " onmouseover="this.style.background='#2b3642'" onmouseout="this.style.background='#384959'">
          🔄 Coba Lagi
        </button>
      </div>

      <div class="main-right">
        <div class="profile-card">
          <h2>💡 Info PWA</h2>
          <p style="color: #384959; text-align: left;">
            Website ini menggunakan teknologi <strong>Progressive Web App (PWA)</strong> 
            dengan strategi <strong>Network-Only</strong>.
          </p>
          <p style="color: #384959; text-align: left; margin-top: 10px;">
            Saat offline, Anda akan selalu melihat halaman ini sampai koneksi 
            internet kembali tersedia.
          </p>
        </div>
      </div>
    </div>

    <script>
      // Check connection status
      function checkConnection() {
        const statusText = document.querySelector('.nav-right span');
        if (navigator.onLine) {
          statusText.textContent = '🟢 Online';
          statusText.style.color = '#4CAF50';
          // Auto reload if back online
          setTimeout(() => {
            window.location.href = 'index.html';
          }, 1000);
        } else {
          statusText.textContent = '🔴 Offline';
          statusText.style.color = '#f44336';
        }
      }

      // Initial check
      checkConnection();

      // Listen for connection changes
      window.addEventListener('online', () => {
        console.log('Connection restored!');
        checkConnection();
      });
      
      window.addEventListener('offline', () => {
        console.log('Connection lost!');
        checkConnection();
      });

      // Prevent navigation when offline
      document.addEventListener('click', (e) => {
        if (e.target.tagName === 'A' && !navigator.onLine) {
          e.preventDefault();
          alert('⚠️ Tidak dapat navigasi saat offline. Silakan sambungkan internet terlebih dahulu.');
        }
      });
    </script>
  </body>
</html>