<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Desain Web - Teguh Portfolio</title>
    <meta name="description" content="Portfolio website Teguh Esa Maulanna - Mahasiswa Informatika Universitas Andalas" />
    <link rel="stylesheet" href="style.css" />
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#384959" />
    <link rel="apple-touch-icon" href="/image/icon-512.png" />
  </head>
  <body>
    <nav>
      <div class="nav-left">
        <p>teguhsmlnna</p>
      </div>
      <div class="nav-right">
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </div>
    </nav>
    <div class="main-grid">
      <div class="main-left">
        <h1>Selamat Datang di Web Saya</h1>
        <p>
          Web ini merupakan project saya dalam mengikuti matakuliah Desain Web,
          mari lihat perkembangan dari project saya ini.
        </p>
        <h2>âœ¨ Fitur Progressive Web App (PWA)</h2>
        <p>
          Website ini sudah mendukung <b>Progressive Web App (PWA)</b>, yang
          memungkinkan website ini dapat diinstall layaknya aplikasi mobile.
          Berikut beberapa keunggulan PWA ini:
        </p>
        <p>
          ðŸš€ <b>Install ke Perangkat:</b> Dapat dipasang di smartphone atau desktop layaknya aplikasi native.
        </p>
        <p>
          ðŸ“± <b>Tampilan Fullscreen:</b> Berjalan dalam mode standalone tanpa browser bar.
        </p>
        <p>
          âš¡ <b>Akses Offline:</b> Halaman yang sudah dikunjungi dapat diakses tanpa koneksi internet.
        </p>
        <p>
          ðŸ’¾ <b>Cache Otomatis:</b> Konten disimpan secara otomatis untuk akses lebih cepat.
        </p>
        <p>
          Coba klik tombol "Install" di bawah ini untuk memasang web ini sebagai
          aplikasi di perangkat Anda.
        </p>
        <button id="installBtn" style="display: none">Install PWA</button>
        <p id="installStatus" style="font-size: 0.9rem; color: #666; margin-top: 10px;"></p>
      </div>
      <div class="main-right">
        <div class="profile-card">
          <h2>Teguh Esa Maulanna</h2>
          <p>Informatika</p>
          <div class="profile-actions">
            <a href="contact.html">Contact</a>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Register Service Worker
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/service-worker.js')
            .then((registration) => {
              console.log('Service Worker registered successfully:', registration.scope);
            })
            .catch((error) => {
              console.log('Service Worker registration failed:', error);
            });
        });
      }

      // PWA Install Prompt
      let deferredPrompt;
      const installBtn = document.getElementById('installBtn');
      const installStatus = document.getElementById('installStatus');

      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        installBtn.style.display = 'block';
        installStatus.textContent = 'âœ“ PWA siap diinstall!';
        installStatus.style.color = '#28a745';

        installBtn.addEventListener('click', async () => {
          if (!deferredPrompt) {
            return;
          }
          
          deferredPrompt.prompt();
          const { outcome } = await deferredPrompt.userChoice;
          
          if (outcome === 'accepted') {
            installStatus.textContent = 'âœ“ PWA berhasil diinstall! Terima kasih.';
            installStatus.style.color = '#28a745';
          } else {
            installStatus.textContent = 'Install dibatalkan. Anda bisa install kapan saja.';
            installStatus.style.color = '#ffc107';
          }
          
          deferredPrompt = null;
          installBtn.style.display = 'none';
        });
      });

      // Check if app is already installed
      window.addEventListener('appinstalled', () => {
        installStatus.textContent = 'âœ“ PWA sudah terinstall di perangkat Anda!';
        installStatus.style.color = '#28a745';
        installBtn.style.display = 'none';
        deferredPrompt = null;
      });

      // Detect if running as PWA
      if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true) {
        installStatus.textContent = 'âœ“ Anda sedang menggunakan PWA mode!';
        installStatus.style.color = '#28a745';
      }
    </script>
  </body>
</html>